# weather-now

## [**weather_now.py**](weather_now.py)

A Python scipt to display [Open-Meteo API](https://open-meteo.com/en/docs) data for current weather on the command line. It is based on code originally published under the [MIT](https://opensource.org/license/mit) licence, with minor adaptations (see [**changelog**](CHANGELOG.md)).

```
usage: weather_now.py [-l <placename>] [-c <country_code>]
                      [-t [celsius|fahrenheit]] [-p [mm|inch]] [-w [kmh|ms|mph|kn]]
                      [-o [classic|data|extra]]

options:
  -h, --help  show this help message and exit
  -l          location placename (defaults to London if omitted)
  -c          country code (defaults to GB if omitted)
  -t          temperature unit: celsius or fahrenheit
  -p          precipitation unit: mm or inch
  -w          wind speed unit: kmh, ms, mph or kn
  -o          output style: classic (heading, ascii art and data),
              data (just data) or extra (just data, with extra parameters)
```


## [**weather-now-menu**](weather-now-menu)

A Bash wrapper for [**weather_now.py**](weather_now.py) driven by [Zenity*](https://help.gnome.org/users/zenity/stable/index.html.en) dialogs. Multilingual dialog and weather labels are generated by [translate-shell**](https://github.com/soimort/translate-shell) - apologies if any are impolite or ridiculous. (* Required dependency, ** optional dependency.)

```
Usage:

Translate locations and labels before displaying current weather:

    weather-now-menu [language code, per $ trans --list-all]

Display current weather and dialog labels in English, or per last supplied language code:

    weather-now
```

## More information

Edit [**locations**](locations) as required.

Edit [**weather-now-menu.conf**](weather-now-menu.conf) to change weather parameter units.

If any translations are inappropriate, edit the following dynamically generated files:

```
locations-native
labels-native
conditions-native
```

NB Any subsequent change of language will overwrite alterations.

## Specialist configs

Replace the weather-now-menu.conf in your script folder with one of these:

| Config name                                               | Additional weather parameters                                      |
| :-------------------------------------------------------: | :----------------------------------------------------------------: |
| [severe](configs/severe/weather-now-menu.conf)            | CAPE, convective inhibition, lifted index, TCWV                                  |
| [agriculture](configs/agriculture/weather-now-menu.conf)  | 'severe' + Vapour pressure deficit, evapotranspiration             |
| [aviation](configs/aviation/weather-now-menu.conf)        | 'severe' + Wind speed 80m, wind speed 120m, wind speed 180m,       |
|                                                           | wind direction 80m, wind direction 120m, wind direction 180m,      |                                                 |
|                                                           | cloud cover low, cloud cover mid, cloud cover high, freezing level |                                                  |

Create your own as required.

**Important! After dropping a specialist config into the script folder, you must run weather-now-menu with your language code  to rebuild weather parameter translations.**

Notes:
1. Wind directions are displayed in degrees.
2. Weather is displayed in a scrollable zenity --text-info
3. RESULTS_FONT in these configs is Noto Sans Bold, change to suit.</br>

## Screenshots

Note: As of Zenity v4.0.1, it does not seem possible to coerce --text and --column for right justification of RTL languages.</br></br>

| Locations                                  | Weather                                |
| :----------------------------------------: | :------------------------------------: |
| ![locations](screenshots/locations-en.png) | ![weather](screenshots/weather-en.png) |
| ![locations](screenshots/locations-pl.png) | ![weather](screenshots/weather-pl.png) |
| ![locations](screenshots/locations-el.png) | ![weather](screenshots/weather-el.png) |
| ![locations](screenshots/locations-ar.png) | ![weather](screenshots/weather-ar.png) |










